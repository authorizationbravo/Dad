
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegisAI IDE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="ide-container">
        <!-- Header -->
        <header class="ide-header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-balance-scale"></i>
                    <span>LegisAI IDE</span>
                </div>
            </div>
            <div class="header-center">
                <button class="run-btn" id="runBtn">
                    <i class="fas fa-play"></i>
                    Run
                </button>
            </div>
            <div class="header-right">
                <button class="btn-icon" id="downloadBtn" title="Download Project">
                    <i class="fas fa-download"></i>
                </button>
                <button class="btn-icon" id="toolsBtn" title="Tools">
                    <i class="fas fa-toolbox"></i>
                </button>
                <button class="btn-icon" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="btn-icon" title="Terminal">
                    <i class="fas fa-terminal"></i>
                </button>
            </div>
        </header>

        <!-- Tools Sidebar -->
        <div class="tools-sidebar" id="toolsSidebar">
            <div class="tools-header">
                <h3>Tools</h3>
                <button class="btn-icon" id="closeToolsBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="tools-content">
                <div class="tool-section">
                    <div class="tool-section-header" onclick="ideApp.toggleToolSection('secrets')">
                        <i class="fas fa-key"></i>
                        <span>Secrets</span>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="tool-section-content" id="secrets-content">
                        <div class="secrets-list" id="secretsList">
                            <!-- Secrets will be populated here -->
                        </div>
                        <button class="btn btn-primary" id="addSecretBtn">
                            <i class="fas fa-plus"></i> Add Secret
                        </button>
                    </div>
                </div>
                
                <div class="tool-section">
                    <div class="tool-section-header" onclick="ideApp.toggleToolSection('integrations')">
                        <i class="fas fa-plug"></i>
                        <span>Integrations</span>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="tool-section-content" id="integrations-content">
                        <div class="integration-item">
                            <div class="integration-info">
                                <i class="fab fa-openai"></i>
                                <span>OpenAI</span>
                            </div>
                            <div class="integration-status" id="openai-status">Not Connected</div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-info">
                                <i class="fas fa-robot"></i>
                                <span>Anthropic</span>
                            </div>
                            <div class="integration-status" id="anthropic-status">Not Connected</div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-info">
                                <i class="fas fa-bolt"></i>
                                <span>Groq</span>
                            </div>
                            <div class="integration-status" id="groq-status">Not Connected</div>
                        </div>
                    </div>
                </div>
                
                <div class="tool-section">
                    <div class="tool-section-header" onclick="ideApp.toggleToolSection('deployment')">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Deployment</span>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="tool-section-content" id="deployment-content">
                        <button class="btn btn-primary" id="deployBtn">
                            <i class="fas fa-rocket"></i> Deploy to Replit
                        </button>
                        <div class="deployment-status" id="deploymentStatus">
                            Ready to deploy
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main IDE Content -->
        <div class="ide-body">
            <!-- Left Panel - File Explorer -->
            <div class="panel panel-left" id="filePanel">
                <div class="panel-header">
                    <h3>Explorer</h3>
                    <div class="panel-actions">
                        <button class="btn-icon" id="newFileBtn" title="New File">
                            <i class="fas fa-file-plus"></i>
                        </button>
                        <button class="btn-icon" id="newFolderBtn" title="New Folder">
                            <i class="fas fa-folder-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="file-tree" id="fileTree">
                        <!-- File tree will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Center Panel - Tabbed Interface -->
            <div class="panel panel-center" id="centerPanel">
                <div class="panel-header">
                    <div class="tabs-container">
                        <div class="tab active" data-tab="editor" id="editorTab">
                            <i class="fas fa-code"></i>
                            <span>Editor</span>
                            <button class="tab-close" onclick="ideApp.closeTab('editor')">×</button>
                        </div>
                        <div class="tab" data-tab="assistant" id="assistantTab">
                            <i class="fas fa-robot"></i>
                            <span>AI Assistant</span>
                        </div>
                        <div class="tab" data-tab="terminal" id="terminalTab">
                            <i class="fas fa-terminal"></i>
                            <span>Terminal</span>
                        </div>
                        <div class="tab" data-tab="git" id="gitTab">
                            <i class="fab fa-git-alt"></i>
                            <span>Git</span>
                        </div>
                    </div>
                    <div class="panel-actions">
                        <button class="btn-icon" id="saveFileBtn" title="Save (Ctrl+S)">
                            <i class="fas fa-save"></i>
                        </button>
                        <button class="btn-icon" id="formatCodeBtn" title="Format Code">
                            <i class="fas fa-magic"></i>
                        </button>
                        <button class="btn-icon" id="searchBtn" title="Search (Ctrl+F)">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <!-- Code Editor Tab -->
                    <div class="tab-content active" id="editor-content">
                        <div class="editor-container">
                            <div class="editor-sidebar">
                                <div class="editor-breadcrumb" id="editorBreadcrumb">
                                    <span>No file selected</span>
                                </div>
                                <div class="editor-minimap" id="editorMinimap"></div>
                            </div>
                            <div class="editor-main">
                                <textarea id="codeEditor" placeholder="Select a file to start editing..."></textarea>
                                <div class="editor-status-bar">
                                    <span id="editorPosition">Ln 1, Col 1</span>
                                    <span id="editorLanguage">Plain Text</span>
                                    <span id="editorEncoding">UTF-8</span>
                                    <span id="editorIndentation">Spaces: 2</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Assistant Tab -->
                    <div class="tab-content" id="assistant-content">
                        <div class="chat-container">
                            <div class="chat-messages" id="chatMessages">
                                <div class="message assistant-message">
                                    <div class="message-avatar">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <div class="message-content">
                                        <p>Hello! I'm your AI assistant for legislative analysis. How can I help you today?</p>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-input-container">
                                <div class="chat-input-wrapper">
                                    <input type="text" id="chatInput" placeholder="Ask about legislation, code, or anything else...">
                                    <button id="sendBtn">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Terminal Tab -->
                    <div class="tab-content" id="terminal-content">
                        <div class="terminal-container">
                            <div class="terminal-header">
                                <div class="terminal-tabs">
                                    <div class="terminal-tab active">
                                        <span>bash</span>
                                        <button class="terminal-tab-close">×</button>
                                    </div>
                                    <button class="btn-icon" id="newTerminalBtn" title="New Terminal">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="terminal-output" id="terminalOutput">
                                <div class="terminal-line">
                                    <span class="terminal-prompt">user@legis-ai:~$ </span>
                                    <span class="terminal-cursor">_</span>
                                </div>
                            </div>
                            <div class="terminal-input-container">
                                <span class="terminal-prompt">user@legis-ai:~$ </span>
                                <input type="text" id="terminalInput" class="terminal-input" autocomplete="off">
                            </div>
                        </div>
                    </div>

                    <!-- Git Tab -->
                    <div class="tab-content" id="git-content">
                        <div class="git-container">
                            <div class="git-section">
                                <h4>Repository Status</h4>
                                <div class="git-status" id="gitStatus">
                                    <div class="git-branch">
                                        <i class="fab fa-git-alt"></i>
                                        <span>main</span>
                                        <button class="btn btn-sm">Switch Branch</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="git-section">
                                <h4>Changes</h4>
                                <div class="git-changes" id="gitChanges">
                                    <div class="git-file modified">
                                        <i class="fas fa-file-code"></i>
                                        <span>index.ts</span>
                                        <span class="git-status-badge modified">M</span>
                                    </div>
                                    <div class="git-file added">
                                        <i class="fas fa-file"></i>
                                        <span>new-feature.js</span>
                                        <span class="git-status-badge added">A</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="git-section">
                                <h4>Commit</h4>
                                <textarea id="commitMessage" placeholder="Commit message..."></textarea>
                                <div class="git-actions">
                                    <button class="btn btn-primary" id="commitBtn">
                                        <i class="fas fa-check"></i> Commit
                                    </button>
                                    <button class="btn btn-secondary" id="pushBtn">
                                        <i class="fas fa-upload"></i> Push
                                    </button>
                                    <button class="btn btn-secondary" id="pullBtn">
                                        <i class="fas fa-download"></i> Pull
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Preview -->
            <div class="panel panel-right" id="previewPanel">
                <div class="panel-header">
                    <h3>Preview</h3>
                    <div class="panel-actions">
                        <button class="btn-icon" id="refreshPreviewBtn" title="Refresh">
                            <i class="fas fa-refresh"></i>
                        </button>
                        <button class="btn-icon" id="openExternalBtn" title="Open in New Tab">
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <iframe id="previewFrame" src="/api/preview" frameborder="0"></iframe>
                </div>
            </div>
        </div>

        <!-- Bottom Panel - Console -->
        <div class="console-panel" id="consolePanel">
            <div class="console-header">
                <h4>Console</h4>
                <div class="console-actions">
                    <button class="btn-icon" id="clearConsoleBtn" title="Clear Console">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="btn-icon" id="toggleConsoleBtn" title="Toggle Console">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
            <div class="console-content" id="consoleContent">
                <div class="console-output" id="consoleOutput">
                    <div class="console-line">
                        <span class="console-timestamp">[10:30:15]</span>
                        <span class="console-info">Server started on port 3000</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="secretModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="secretModalTitle">Add Secret</h3>
                <button class="close-btn" id="closeSecretModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="secretKey">Secret Key</label>
                    <input type="text" id="secretKey" placeholder="e.g., OPENAI_API_KEY">
                </div>
                <div class="form-group">
                    <label for="secretValue">Secret Value</label>
                    <input type="password" id="secretValue" placeholder="Enter secret value">
                    <button type="button" class="toggle-password" id="toggleSecretValue">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="saveSecretBtn">Save</button>
                    <button class="btn btn-secondary" id="cancelSecretBtn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="newFileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New File</h3>
                <button class="close-btn" id="closeNewFileModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" id="newFileName" placeholder="filename.ext">
                <div class="modal-actions">
                    <button class="btn btn-primary" id="createFileBtn">Create</button>
                    <button class="btn btn-secondary" id="cancelFileBtn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="newFolderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Folder</h3>
                <button class="close-btn" id="closeNewFolderModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" id="newFolderName" placeholder="folder-name">
                <div class="modal-actions">
                    <button class="btn btn-primary" id="createFolderBtn">Create</button>
                    <button class="btn btn-secondary" id="cancelFolderBtn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
